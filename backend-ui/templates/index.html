<!doctype html>
<html lang=en xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Entitlement Requests</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first-->
    <script src="https://www.gstatic.com/firebasejs/7.18/firebase-app.js"></script>
    <!-- Add Firebase Auth service-->
    <script src="https://www.gstatic.com/firebasejs/7.18/firebase-auth.js"></script>
    <script src="/config.js"></script>
    <script src="/firebase.js"></script>
    <script src="/approve.js"></script>
    <link rel="icon"
          href="data:image/svg+xml;charset=UTF-8;base64,PHN2ZyBmaWxsPSIjMzM2N0Q2IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDMyIDMyIiB3aWR0aD0iMTAwJSIgZml0PSIiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE3LjYwNyAwdjcuMzAzaC03LjMwNHoiIGZpbGwtb3BhY2l0eT0iLjYiPjwvcGF0aD48cGF0aCBkPSJNMTcuNjA3IDcuMzAzdjcuMzA0bC03LjMwNC03LjMwNHoiIGZpbGwtb3BhY2l0eT0iLjgiPjwvcGF0aD48cGF0aCBkPSJNMTAuMDUgMjEuOThsLjA0My0uMTc2IDEuMzItMi4zOUgyMi4zNGMxLjEgMCAyLjA2OC0uNjAyIDIuNTY3LTEuNTFsNS42Ni0xMC4yODMtMi41NS0xLjRIMjhsLTEuNjEgMi45My00LjA1IDcuMzRIMTIuMDQ0bC0uMTktLjM5LTMuMjg2LTYuOTQtMS4zOTMtMi45NC0xLjM4LTIuOTNIMXYyLjkzaDIuOTMzbDUuMjggMTEuMTQtMS45OCAzLjU5YTIuODMgMi44MyAwIDAgMC0uMzY2IDEuNDFBMi45NDIgMi45NDIgMCAwIDAgOS44IDI1LjI4aDE3LjZ2LTIuOTMzSDEwLjQxNmEuMzczLjM3MyAwIDAgMS0uMzY3LS4zNjd6IiBmaWxsLW9wYWNpdHk9Ii42IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD48cGF0aCBkPSJNMTEuNzM2IDI2LjVBMi43NDYgMi43NDYgMCAwIDAgOSAyOS4yNSAyLjc0NiAyLjc0NiAwIDAgMCAxMS43MzYgMzJhMi43NTggMi43NTggMCAwIDAgMi43NS0yLjc1IDIuNzU4IDIuNzU4IDAgMCAwLTIuNzUtMi43NXptMTIgMEEyLjc0NiAyLjc0NiAwIDAgMCAyMSAyOS4yNSAyLjc0NiAyLjc0NiAwIDAgMCAyMy43MzYgMzJhMi43NTggMi43NTggMCAwIDAgMi43NS0yLjc1IDIuNzU4IDIuNzU4IDAgMCAwLTIuNzUtMi43NXoiPjwvcGF0aD48cGF0aCBkPSJNMTcuNjA3IDBsNy4zMDMgNy4zMDNoLTcuMzAzeiIgZmlsbC1vcGFjaXR5PSIuOCI+PC9wYXRoPjxwYXRoIGQ9Ik0yNC45MSA3LjMwM2wtNy4zMDMgNy4zMDRWNy4zMDN6Ij48L3BhdGg+PC9zdmc+"
</head>
<style>
    table {
      margin: 25px;
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }
</style>
<body class="yellow lighten-5">
<nav class="teal darken-3">
    <div class="nav-wrapper container"><a class="brand-logo center" href="#!">Entitlement Requests</a>
        <ul class="left" id="nav-mobile">
            <button class="waves-effect waves-light btn" id="signInButton">Sign In with Google</button>
        </ul>
    </div>
</nav>
<div id="entitlementRequests">
<h4 class="header center" >Entitlement Requests</h4>
<!-- generates the list of unapproved entitlements -->
<table>
    <tr>
      <th>Procurement ID</th>
      <th>Internal ID</th>
      <th>Product Name</th>
      <th>Entitlement ID</th>
      <th>Consumer ID</th>
      <th>Product ID</th>
      <th>Plan ID</th>
      <th>Start Time</th>
      <th>Approved</th>
    </tr>
    {% for entity in entitlements %}
      {% for product in entity['products'] %}
      <tr>
          <td>{{ entity['procurement_account_id'] }}</td>
          <td>{{ entity['internal_account_id'] }}</td>
          <td>{{ product }}</td>
          <td>{{ entity['products'][product]['entitlement_id'] }}</td>
          <td>{{ entity['products'][product]['consumer_id'] }}</td>
          <td>{{ entity['products'][product]['product_id'] }}</td>
          <td>{{ entity['products'][product]['plan_id'] }}</td>
          <td>{{ entity['products'][product]['start_time'] }}</td>
          {% if entity['products'][product]['is_approved'] == False %}
            <td><button class="btn" onClick="approve('{{ entity['products'][product]['entitlement_id'] }}')">Approve</button></td>
          {% else %}
            <td>{{ entity['products'][product]['is_approved'] }}</td>
          {% endif %}
      </tr>
      {% endfor %}
    {% endfor %}
</table>
</div>
<!-- Publish function is in the static directory -->
</div>
<script>
  document.getElementById('signInButton').addEventListener("click", toggle);
</script>
</body>
</html>